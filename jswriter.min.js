!function(t){t.fn.JSWriter=function(e){function r(e){var r,a=t('<style id="jswriter-styles"></styles'),o="";"object"!=typeof e&&(e=i());for(selector in e){o+=selector+"{",r=e[selector];for(prop in r)o+=prop+":"+r[prop]+";";o+="}"}a.text(o),t("head").append(a)}function i(){var t={".jswriter .tabs li":{cursor:"pointer"},".jswriter .editor":{border:"1px solid #aaa",height:"500px"},".jswriter .editor-text":{padding:"15px",height:"100%",width:"100%","float":"left","overflow-y":"hidden"},".jswriter .editor-text:hover":{"overflow-y":"auto"},".jswriter .editor.both .editor-text":{width:"49.5%"},".jswriter .text-write":{border:"0px",background:"#d8d8d8",resize:"none"},".jswriter .separator":{background:"#aaa","float":"left",width:"1%",height:"100%"},".jswriter .editor.preview .separator, .jswriter .editor.preview .text-write":{display:"none"},".jswriter .editor.write .separator, .jswriter .editor.write .text-preview":{display:"none"}};return e.usingBootstrap||(t[".jswriter .editor-tabs"]={"list-style":"none","padding-left":"0","margin-bottom":"0"},t[".jswriter .editor-tabs::after"]={display:"table",content:'" "',clear:"both"},t[".jswriter .editor-tabs li"]={"float":"left",display:"block"},t[".jswriter .editor-tabs a"]={display:"block",padding:"8px",border:"1px solid #aaa","background-color":"#eee","font-size":"2rem","text-decoration":"none"},t[".jswriter .editor-tabs a:hover"]={"background-color":"#aaa"},t[".jswriter .active a"]={"background-color":"#aaa"}),t}var a={text:"",styles:!0,usingBootstrap:!0,textfilter:function(t){return t}},e=t.extend(a,e);e.styles&&0==t("#jswriter-styles").length&&r(e.styles);var o=t(this),s=t('<ul class="tabs editor-tabs"><li data-mode="both" class="active"><a>Both</a></li><li data-mode="write"><a>Write</a></li><li data-mode="preview"><a>Preview</a></li></ul>'),d=t('<div class="editor both"><textarea name="text_markdown" class="text-write editor-text"></textarea><div class="separator"></div><div class="text-preview editor-text"></div></div>'),l=d.find(".text-write"),n=d.find(".text-preview");e.usingBootstrap&&(s.removeClass("editor-tabs"),s.addClass("nav"),s.addClass("nav-tabs")),o.addClass("jswriter"),o.append(s),o.append(d);var c="both";return s.on("click","li",function(){var e=t(this),r=e.data("mode");r!=c&&(d.removeClass(c),d.addClass(r),s.find(".active").removeClass("active"),e.addClass("active"),c=r)}),l.on("keydown",function(t){if(9==(t.keyCode||t.which)){t.preventDefault();var e=l.get(0).selectionStart,r=l.get(0).selectionEnd;l.val(l.val().substring(0,e)+"	"+l.val().substring(r)),l.get(0).selectionStart=l.get(0).selectionEnd=e+1}}),l.on("keyup",function(){n.html(e.textfilter(l.val()))}),e.text.length>0&&(l.text(e.text),n.html(e.textfilter(e.text))),this.getTexts=function(){var t=l.val();return{write:t,preview:e.textfilter(t)}},this}}(jQuery);